import React, { useState } from "react";
import { Chart } from "react-google-charts";
import Modal from "antd/es/modal/Modal";

function App() {
  const data = [
    ["Module Name", "Count", { role: "tooltip" }],
    ["Business Development", 9, 23],
    ["Legal Department", 22, 45],
    ["Project", 2, 67],
    ["Handover", 2, 89],
  ];

  const [selectedModule, setSelectedModule] = useState(null);
  const [isModalVisible, setIsModalVisible] = useState(false);

  const options = {
    title: "Module Activity Dashboard",
    pieHole: 0.4,
    is3D: true,
    tooltip: {
      isHtml: false,
      trigger: "focus",
    },
    legend: {
      position: "bottom",
      alignment: "center",
      textStyle: {
        color: "#233238",
        fontSize: 14,
      },
    },
  };

  const chartEvents = [
    {
      eventName: "select",
      callback: ({ chartWrapper }) => {
        const chart = chartWrapper.getChart();
        const selection = chart.getSelection();
        if (selection.length > 0) {
          const rowIndex = selection[0].row;
          const selectedBackendData = data[rowIndex + 1];
          const [moduleName, count, moduleId] = selectedBackendData;
          console.log(`Selected Module ID: ${moduleId}`);
          setSelectedModule(moduleName + " " + moduleId);
          setIsModalVisible(true);
        }
      },
    },
  ];

  

  return (
    <>
      <div>
        <Chart
          chartType="PieChart"
          data={data}
          options={options}
          width={"100%"}
          height={"500px"}
          chartEvents={chartEvents}
        />
      </div>

      <Modal
        open={isModalVisible}
        onCancel={() => setIsModalVisible(false)}
        footer={null}
      >
        <h2>{selectedModule}</h2>
      </Modal>
    </>
  );
}

export default App;
